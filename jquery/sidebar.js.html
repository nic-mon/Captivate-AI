<script>
// Nav Bar functions

$(function() {
    $( "#fixes" ).hide();
    $( "#home" ).hide();
    $( "#brainstorm" ).hide();
    $( "#ideas" ).show();
});

    $( "#ideanav" ).click(function() {
      $( "#fixes" ).hide();
      $( "#home" ).hide();
      $( "#brainstorm" ).hide();
      $( "#ideas" ).show();
    });
    
    $( "#homenav" ).click(function() {
      $( "#ideas" ).hide();
      $( "#fixes" ).hide();
      $( "#brainstorm" ).hide();
      $( "#home" ).show();
    });
    
    $( "#fixnav" ).click(function() {
      $( "#ideas" ).hide();
      $( "#home" ).hide();
      $( "#brainstorm" ).hide();
      $( "#fixes" ).show();
    });

    $( "#brainstorm_nav" ).click(function() {
      $( "#fixes" ).hide();
      $( "#home"  ).hide();
      $( "#ideas" ).hide();
      $( "#brainstorm" ).show();
    });
   //////////////////////////////

$(function() {
    // $("html, body").animate({ scrollTop: 0 }, "slow");
    $('#navbar').css({"position": "fixed", "bottom":"0"});
});
    
$(function() {
  google.script.run.withSuccessHandler(fill_goals).get_purpose();
  google.script.run.withSuccessHandler(fill_fixes).check_presentation();
  google.script.run.withSuccessHandler(fill_ideas).get_ideas();
});
      
      function log_layouts(layouts) {
        console.log(layouts);
      }
      
      // filling functions 
      
      function fill(data) {
        // [goal_data, idea_data, fix_data]
        goal_data = data[0];
        idea_data = data[1];
        fix_data = data[2];
          google.script.run.readSurvey();
        fill_goals(goal_data);
        fill_ideas(idea_data);
        fill_fixes(fix_data);
        
      }
      
      function fill_goals(goal_data) {
      // [time, purpose, audience]
          // get variables from the user survey

          var time, purpose, audience;
        time = goal_data[0];
        purpose = goal_data[1];
        audience = goal_data[2];
        
          google.script.run.readSurvey();
        // put them in their respective divs and style them
          var time_text = "<span id='goal_time'>" + time + "\
            </span>";
          var goal_text = "<span class='goal_text'>" + purpose + "\
            </span>";
          var audience_text = "<span class='goal_text'>" + audience + "\
            </span>";

          $('#time').append(time_text);
        $('#goal').append(goal_text);
        $('#audience').append(audience_text);
      }
      
      function fill_ideas(idea_data) {
        // [fonts, quotes]
        fonts = idea_data[0];
        quotes = idea_data[1];
        
        add_font_idea(fonts);
        add_quote_idea(quotes);
      }

      function add_font_idea(fonts) {
        text = "<div class='idea'>\
          <div class='icon'>\
          <img src='https://captivate-ai.herokuapp.com/static/images/icons/typography.png'>\
          </img></div>\
          Here are some typefaces that are a better fit for the content you are presenting\
          <div id='fontbox'>";
          
        for (i=0; i<fonts.length; i++) {
          text += "<button class='font black lighten-2 waves-light waves-effect' style='font-family:"+fonts[i]+"'>"+fonts[i]+"</button>";
        }
        text += "</div></div>";
        $('#ideabox').append(text);
        
        //add function to font buttons
        $( ".font" ).click(function() { google.script.run.setFont($(this).text());});
      }
      
      function add_quote_idea(quotes) {
        text = "<div class='idea'>\
          <div class='icon'>\
          <img src='https://captivate-ai.herokuapp.com/static/images/icons/quote.png'>\
          </img>\
          </div>\
          Here are some quotes that can help make your presentation more memorable";
        
        for (i=0; i<quotes.length; i++) {
          text += "<button class='quote black lighten-2 waves-light " +
              "waves-effect'>" + quotes[i] + "</button>";
        }
        text += "</div>";
        $('#ideabox').append(text);
      }
      
      function fill_fixes(fix_data) {
          console.log(fix_data);
        for(i = 0; i < fix_data.length; i++) {
          add_fix(fix_data[i]);
        }
      }
      
      function add_fix(fix) {
          console.log(fix);
        text = "<div class='suggestion'>\
          <div class='label'>SLIDE</div>\
          <div class='label'>SUGGESTION</div>\
          " + fix + "</div>";
        $('#fixbox').append(text);     
      }
</script>